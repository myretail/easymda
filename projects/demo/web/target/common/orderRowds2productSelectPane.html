
<script type="text/javascript" >
//orderRowds2productSelectPane.html
dojo.require("projectDojo.Prod");
var dojoProd= new  projectDojo.Prod();
dojoProd.initProd();
var urlpaneorderRowds2product= getUrl()+ "services/ProdManageService";
var deletedatapaneorderRowds2product =  new Array();
var querydatapaneorderRowds2product =  new Array();
var pagenumberpaneorderRowds2product=1;
var totalCountpaneorderRowds2product=0;
var pagesizepaneorderRowds2product=10;
var orderBypaneorderRowds2product='0';
var queryvopaneorderRowds2product=new Object();
var oddstyle='';
var modelpaneorderRowds2product = new dojox.grid.data.Table(null, querydatapaneorderRowds2product);


var noPaneorderRowds2product;
var selectPaneorderRowds2productIDs;
var oldFloatPaneorderRowds2product;
var selectPaneorderRowds2productInRow;
var ifMultPaneorderRowds2product=0;	
	  
var getChoisepaneorderRowds2product = function(inRowIndex) {
			if(selectPaneorderRowds2productIDs==querydatapaneorderRowds2product[inRowIndex][1]){
                  return  '<input class="dojoxGrid-input"  name="selectorderRowds2product" id="'+querydatapaneorderRowds2product[inRowIndex][1]+'" checked="true" type="checkbox"/>'
              }else{
                  return  '<input class="dojoxGrid-input"  name="selectorderRowds2product" id="'+querydatapaneorderRowds2product[inRowIndex][1]+'"  type="checkbox"/>'
              }
			    }	  
	  
var layoutpaneorderRowds2product=[{
	//¸ù¾ÝfieldµÄÖµ£¬ÒÀ¾ÝÄ¬ÈÏµÄË³Ðò£¬´ÓjsÖÐµÄtoArray×ª»»·½·¨·µ»ØµÄquerydateÖÐÈ¡Êý¾Ý
	    cells: [ [
			  {name: 'select', width: 3, get:getChoisepaneorderRowds2product},
                { name: 'NO.', width: 2, styles: 'text-align: center;', get: function(inRowIndex){ return inRowIndex+1;} },//
				  				  {name: i18nStr.prodName, field: 2,width: 10}
						  						  				,   {name: i18nStr.code, field: 3,width: 10}
						  						  				 ,  {name: i18nStr.price,field:4, width: 8}
						  						  				,   {name: i18nStr.datef,field:5, width: 8}
						  						  				,   {name: i18nStr.prodType, field: 6,width: 10}
						  				
//¶ÔÓÚ¿ÉÐÞ¸ÄµÄlayout£¬(org.andromda.cartridges.bpm4struts.metafacades.StrutsManageableEntityAssociationEndLogicImpl[prodCust] in [org.andromda.cartridges.bpm4struts.metafacades.StrutsManageableEntityAssociationEndLogicImpl[prodCust], org.andromda.cartridges.bpm4struts.metafacades.StrutsManageableEntityAssociationEndLogicImpl[principal]])²¢if(!false)  µÄ×Ö¶ÎÓ¦µ¯³öFloatµÄÑ¡Ôñ´°¿Ú´ý²âÊÔ
			,   {name: i18nStr.prodCust,field: 7,get:function(inRowIndex){ var str='';if(querydatapaneorderRowds2product[inRowIndex]!=undefined && querydatapaneorderRowds2product[inRowIndex][7]!=undefined&& querydatapaneorderRowds2product[inRowIndex][7][2]!=undefined){str=querydatapaneorderRowds2product[inRowIndex][7][2];} return str;} ,width: 10 }
			//¶ÔÓÚ¿ÉÐÞ¸ÄµÄlayout£¬(org.andromda.cartridges.bpm4struts.metafacades.StrutsManageableEntityAssociationEndLogicImpl[principal] in [org.andromda.cartridges.bpm4struts.metafacades.StrutsManageableEntityAssociationEndLogicImpl[prodCust], org.andromda.cartridges.bpm4struts.metafacades.StrutsManageableEntityAssociationEndLogicImpl[principal]])²¢if(!false)  µÄ×Ö¶ÎÓ¦µ¯³öFloatµÄÑ¡Ôñ´°¿Ú´ý²âÊÔ
			,   {name: i18nStr.principal,field: 8,get:function(inRowIndex){ var str='';if(querydatapaneorderRowds2product[inRowIndex]!=undefined && querydatapaneorderRowds2product[inRowIndex][8]!=undefined&& querydatapaneorderRowds2product[inRowIndex][8][2]!=undefined){str=querydatapaneorderRowds2product[inRowIndex][8][2];} return str;} ,width: 10 }
								]]}];	 
					
function getVOpaneorderRowds2product(queryvo){
	var totalCount=0;
      var pu = new SOAPClientParameters2();
      pu.add('ProdVO',queryvo) ;
      pu.add('pageNumber',pagenumberpaneorderRowds2product) ;
	    pu.add('pageSize',pagesizepaneorderRowds2product) ;
	    pu.add('orderBy',orderBypaneorderRowds2product) ;
      SOAPClient.invoke(urlpaneorderRowds2product,"getProd", pu, false,  function GetEnu_callBack(ul, soapResponse){      
           querydatapaneorderRowds2product=new Array();
		   querydatapaneorderRowds2product=dojoProd.ProdVOtoArray_fun(ul,false);
           totalCountpaneorderRowds2product=ul[ul.length-1]["ns:id"]; 
      }); 
      querydatapaneorderRowds2product.splice(querydatapaneorderRowds2product.length-1,1);
      modelpaneorderRowds2product.setData(querydatapaneorderRowds2product);
      var totalpage=Math.ceil(new Number(totalCountpaneorderRowds2product)/pagesizepaneorderRowds2product);
	  
	if(totalpage>1){
		if(pagenumberpaneorderRowds2product==1){
			dijit.byId("but6paneorderRowds2product").setDisabled(true);
			dijit.byId("but7paneorderRowds2product").setDisabled(false);
		}else if(pagenumberpaneorderRowds2product==totalpage){
			dijit.byId("but6paneorderRowds2product").setDisabled(false);
			dijit.byId("but7paneorderRowds2product").setDisabled(true);
		}else{
			dijit.byId("but6paneorderRowds2product").setDisabled(false);
			dijit.byId("but7paneorderRowds2product").setDisabled(false);
		}
	}else{
		dijit.byId("but6paneorderRowds2product").setDisabled(true);
		dijit.byId("but7paneorderRowds2product").setDisabled(true);
	
	}
	if(pagesizepaneorderRowds2product==0){
		totalpage=1;
		dijit.byId("but6paneorderRowds2product").setDisabled(true);
		dijit.byId("but7paneorderRowds2product").setDisabled(true);
	}
	if(totalpage==1)pagenumberpaneorderRowds2product=1;
	
	 document.getElementById("rowCountpaneorderRowds2product").innerHTML=i18nStr.di+" "+pagenumberpaneorderRowds2product+" "+i18nStr.page+" / "+i18nStr.totle+" "+totalpage+" "+i18nStr.page+" / "+i18nStr.sum+" "+totalCountpaneorderRowds2product+" "+i18nStr.rowSize; 	
}

 var selectorderRowds2productFunClick =function(){
    var rep=new Array();
    var allpeos=document.getElementsByName("selectorderRowds2product");
        for(var i=0;i<allpeos.length;i++){
          if(allpeos[i].checked==true){
            //rep=allpeos[i].id;
            if(ifMultPaneorderRowds2product==0){
              rep=querydatapaneorderRowds2product[i];
            }else{
              rep[rep.length]=querydatapaneorderRowds2product[i];
            }
          }
      }
	   return rep;
    //selectorderRowds2productFun(rep);
	//oldFloatorderRowds2product.hide();
}  					


//------------init 
 getVOpaneorderRowds2product(queryvopaneorderRowds2product);
      if(gridpaneorderRowds2product==undefined){
	  			 gridpaneorderRowds2product= new dojox.Grid({
					title: "ff",
					id: "gridpaneorderRowds2product",
					jsId: "gridpaneorderRowds2product",
					structure: layoutpaneorderRowds2product,
					rowCount:querydatapaneorderRowds2product.length-1,
					model:modelpaneorderRowds2product
				}, dojo.byId("gridpaneorderRowds2product"));
				
			}else{ 
			//gridpaneorderRowds2product.model.setData(querydatapaneorderRowds2product); 
			} 
//-------------	

var allpagepaneorderRowds2product=function(){
	pagesizepaneorderRowds2product=0;
	getVOpaneorderRowds2product(queryvopaneorderRowds2product);
}
var  pagesizeChangepaneorderRowds2product=function(mylabel){
	pagesizepaneorderRowds2product=mylabel;
	getVOpaneorderRowds2product(queryvopaneorderRowds2product);
}           
var upPagepaneorderRowds2product= function(){
	pagenumberpaneorderRowds2product--;
	getVOpaneorderRowds2product(queryvopaneorderRowds2product);
}
var downPagepaneorderRowds2product=function(){
	pagenumberpaneorderRowds2product++;
	getVOpaneorderRowds2product(queryvopaneorderRowds2product);
}
 

   
function querybuttonpaneorderRowds2product(){
              //var p = new SOAPClientParameters2();
              var d,n;
              var validstate=0;
              //queryvoorderRowds2product.id=0 ;
              queryvopaneorderRowds2product=new Object();
								  if(querypaneorderRowds2productprodName.getDisplayedValue()!="")queryvopaneorderRowds2product.prodName=querypaneorderRowds2productprodName.getDisplayedValue();//
											  if(querypaneorderRowds2productcode.getDisplayedValue()!="")queryvopaneorderRowds2product.code=querypaneorderRowds2productcode.getDisplayedValue();//
											  n=queryNumber_fun("paneorderRowds2productprice");
					  if(n==null){validstate=1;}else if(n.upSign!="%"){queryvopaneorderRowds2product.price=n;}  
											  d=queryDate_fun("paneorderRowds2productdatef");
					  if(d==null){validstate=1;}else if(d.upSign!="%"){queryvopaneorderRowds2product.datef=d;}
											  if(querypaneorderRowds2productprodType.getDisplayedValue()!="")queryvopaneorderRowds2product.prodType=querypaneorderRowds2productprodType.getDisplayedValue();//
							
	if(querypaneorderRowds2productprodCust.getDisplayedValue()!=""){
				var paneorderRowds2productprodCustQuery= new Object();
				//prodCustQuery.orderRowds2productName=queryprodCust.getDisplayedValue();
				paneorderRowds2productprodCustQuery.id=querypaneorderRowds2productprodCust.getValue();
				queryvopaneorderRowds2product.prodCust=paneorderRowds2productprodCustQuery;
			  }
	if(querypaneorderRowds2productprincipal.getDisplayedValue()!=""){
				var paneorderRowds2productprincipalQuery= new Object();
				//principalQuery.orderRowds2productName=queryprincipal.getDisplayedValue();
				paneorderRowds2productprincipalQuery.id=querypaneorderRowds2productprincipal.getValue();
				queryvopaneorderRowds2product.principal=paneorderRowds2productprincipalQuery;
			  }

			if(validstate==0){
              pagenumber=1;
			  getVOpaneorderRowds2product(queryvopaneorderRowds2product);
             }      
       }
																								   
</script>
<div id="queryDivpaneorderRowds2product" style="margin-right: 0px;  height: ${queryHeight}px; display:none;" >
					<table align="center" width=100% class="queryTable"  >
	<tr >
	<td align="center" style="{width:11%}" i18n="queryNote" >Please input criterial:</td>
	<td style="{width:22%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}" ></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:22%}"></td>
	</tr> 
	<tr ><td align="center" style="{width:11%}"></td>
	<td style="{width:22%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}" ></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:22%}"></td></tr>  
                <tr>
							<td align="right" i18n="prodName" >prodName:</td>
						<td align="left"  >
						
															<input type="text" class="editerInput"  id="querypaneorderRowds2productprodName"  jsId="querypaneorderRowds2productprodName"   dojoType="dijit.form.TextBox"  />
													</td>
														<td align="right"  i18n="code" >code:</td>
						<td align="left"  colspan="3" >
													<input type="text" class="editerInput"  id="querypaneorderRowds2productcode"  jsId="querypaneorderRowds2productcode"   dojoType="dijit.form.TextBox"  />
												</td>  
											<td align="right"  i18n="price" >price:</td>
						<td align="left"  >
							<span id="querypaneorderRowds2productpriceImg0"  ><input type="text" class="editerNumber" jsId="querypaneorderRowds2productprice"  id="querypaneorderRowds2productprice"  dojoType="mydojo.NumberTextBox"  /></span>
							<span id="querypaneorderRowds2productpriceImg1"  style="{display:none}" ><input type="text" class="editerNumberSmall" jsid="querypaneorderRowds2productprice1"  id="querypaneorderRowds2productprice1"  dojoType="mydojo.NumberTextBox"  /></span>
							<span hidefocus="true" style="{display:none}" onclick="selectSign(this);" id="querypaneorderRowds2productpriceImgup">></span>
							<span hidefocus="false"  style="{display:none}" onclick="selectSign(this);" id="querypaneorderRowds2productpriceImgdown" >></span>
							<span id="querypaneorderRowds2productpriceImg2div" style="{display:none}"> <input type="text" class="editerNumberSmall"  jsid="querypaneorderRowds2productprice2"  id="querypaneorderRowds2productprice2"  dojoType="mydojo.NumberTextBox"  /></span>
							<img src="../image/nStart.gif" onclick="queryType(this);" id="querypaneorderRowds2productpriceImg" style="vertical-align:middle;margin-top:0px;">
							
						</td>  
								  </tr>
			                <tr>
							<td align="right" i18n="datef"  >datef:</td> 
						<td align="left"  colspan="3"><span id="querypaneorderRowds2productdatefImg0"  ><input class="editerDate"   jsId="querypaneorderRowds2productdatef" id="querypaneorderRowds2productdatef"  constraints="{datePattern:'yyyy-MM-dd'}" dojoType="dijit.form.DateTextBox"  />
							<input class="editerTime" jsid="querypaneorderRowds2productdatefTime" id="querypaneorderRowds2productdatefTime" value="00:00" dojoType="dijit.form.TimeTextBox" constraints="{timePattern:'HH:mm'}"   invalidMessage="Invalid time. Use HH:mm where HH is 00 - 23 hours."></span>
							<span id="querypaneorderRowds2productdatefImg1" style="{display:none}" ><input class="editerDateSmaller"   jsId="query1paneorderRowds2productdatef" id="query1paneorderRowds2productdatef"  constraints="{datePattern:'yyyy-MM-dd'}" dojoType="dijit.form.DateTextBox"  />
							<input class="editerTimeSmaller" jsId="query1paneorderRowds2productdatefTime" id="query1paneorderRowds2productdatefTime" value="00:00" dojoType="dijit.form.TimeTextBox" constraints="{timePattern:'HH:mm'}"   invalidMessage="Invalid time. Use HH:mm where HH is 00 - 23 hours."></span>
							<span hidefocus="true" style="{display:none}" onclick="selectSign(this);" id="querypaneorderRowds2productdatefImgup">></span>
							<span hidefocus="false"  style="{display:none}" onclick="selectSign(this);" id="querypaneorderRowds2productdatefImgdown" >></span>
							<span id="querypaneorderRowds2productdatefImg2div" style="{display:none}"><input class="editerDateSmaller"   jsId="query2paneorderRowds2productdatef" id="query2paneorderRowds2productdatef"  constraints="{datePattern:'yyyy-MM-dd'}" dojoType="dijit.form.DateTextBox"  />
							<input class="editerTimeSmaller" jsId="query2paneorderRowds2productdatefTime" id="query2paneorderRowds2productdatefTime" value="00:00" dojoType="dijit.form.TimeTextBox" constraints="{timePattern:'HH:mm'}"   invalidMessage="Invalid time. Use HH:mm where HH is 00 - 23 hours."></span>
							<img src="../image/start.gif" onclick="queryType(this);" id="querypaneorderRowds2productdatefImg" style="vertical-align:middle;margin-top:0px;">
						</td>
													<td align="right" colspan="2" ></td>
						<td align="right"  i18n="prodType" >prodType:</td>
						<td align="left"  >
							 								<input type="text" class="editerInput"  id="querypaneorderRowds2productprodType"  jsId="querypaneorderRowds2productprodType"   dojoType="dijit.form.TextBox"  />  
													</td></tr>
					

						<tr><td align="right"  i18n="prodCust"  ></td>
					<td align="left" ><input  id="querypaneorderRowds2productprodCust"  jsId="querypaneorderRowds2productprodCust" class="editerInput" dojoType="dijit.form.myFilteringSelect" store="dojoProd.prodCustStore"  /></td>  
										<td align="right"  i18n="principal"  ></td>
					<td align="left" colspan="3" ><input  id="querypaneorderRowds2productprincipal"  jsId="querypaneorderRowds2productprincipal" class="editerInput" dojoType="dijit.form.myFilteringSelect" store="dojoProd.principalStore"  /></td>  
				    <td align="right"    ></td><td align="right"    ></td></tr>

         <tr align="center"><td></td>
           <td colspan="2"> <button dojoType="dijit.form.Button" onclick="querybuttonpaneorderRowds2product();" iconClass="queryIcon"  i18n="query" >query</button></td>
           <td colspan="3"></td><td colspan="2"></td></tr>
         </table>
	</div>	
	       	
	    <div style="{height:90%;width:100%}"  >
	         <div id="gridpaneorderRowds2product"  dojoType="dojox.Grid" autoWidth="false"  jsId="paneorderRowds2product"	model="modelpaneorderRowds2product"  structure="layoutpaneorderRowds2product"  ></div>
      </div>          
	  

