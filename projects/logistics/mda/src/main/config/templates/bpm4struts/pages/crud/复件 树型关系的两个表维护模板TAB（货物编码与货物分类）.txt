<%
String peopleId = request.getParameter("peopleId");
%>
<html>
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
     <style type="text/css">
            @import "../dojo/dojo-release-1.0.0/dijit/themes/tundra/tundra.css";
            @import "../dojo/dojo-release-1.0.0/dojo/resources/dojo.css";
            @import "../dojo/dojo-release-1.0.0/dojox/grid/_grid/tundraGrid.css";
            @import "../dojo/dojo-release-1.0.0/dojox/grid/_grid/Grid.css";
            @import "../js/dijitTests.css";
            @import "../js/wlProject.css";
			
      </style>
      <script type="text/javascript" src="../dojo/dojo-release-1.0.0/dojo/dojo.js"  
                djConfig="parseOnLoad: true, isDebug: true,locale: 'zh-cn', extraLocale: ['zh-TW', 'fr']"></script>
      <script>
    
            dojo.require("dojo.data.ItemFileWriteStore");
            dojo.require("dojo.parser");
			dojo.require("dijit.Tree");
            dojo.require("dijit.form.Button");
            dojo.require("dijit.Menu");
            dojo.require("dojox.grid.Grid");
            dojo.require("dojox.validate._base");
            dojo.require("dojox.grid._data.model");
            dojo.require("dijit.form.ValidationTextBox");
            dojo.require("dijit.form.TextBox");
            dojo.require("dijit.form.FilteringSelect");
            dojo.require("dijit.form.ComboBox");
            dojo.require("dijit.form.Textarea");
            dojo.require("dojox.grid._data.dijitEditors");
            dojo.require("dojox.layout.FloatingPane");
            dojo.registerModulePath("mydojo", "../../../js/mydojo");
            dojo.require("mydojo.FilteringSelect");
            dojo.require("mydojo.ValidationTextBox");
            dojo.require("mydojo.NumberTextBox");
     </script>
		        
     <script type="text/javascript" src="../js/soapclient.js"></script>
     <script type="text/javascript" src="../js/wlProject.js"></script>
     <script type="text/javascript" src="../js/myi18n.js"></script>
	 <script type="text/javascript" src="../js/${manageable.name}.js"></script>
	 #set ($ifTree = 0)   
	 #foreach($member in $manageable.manageableAttributes)
		#if (${member.name}=='parentId')
			#set ($ifTree = 1) 
		#end
	 #end
	 
#if ($ifTree == 1)
	 #foreach($member in $manageable.AssociationEnds)
		#if(!${member.many})
				<script type="text/javascript" src="../common/${member.association.name}.js"></script>
		#end	
	#end
#end
	
	 #foreach($member in $manageable.manageableAssociationEnds)
		<script type="text/javascript" src="../js/${member.type.name}.js"></script>
	 #end
	<script type="text/javascript" >
	  var url${manageable.name} = getUrl()+ "services/${manageable.name}ManageService";
	  var deletedata${manageable.name} =  new Array();
	  var querydata${manageable.name} =  new Array();
	  var pagenumber${manageable.name}=1;
	  var pagesize${manageable.name}=10;
	  var queryvo${manageable.name}=new ${manageable.name}VOJs();
	  var oddstyle='';
	  var model${manageable.name} = new dojox.grid.data.Table(null, querydata${manageable.name});
	  var urle = getUrl()+ "services/BasicManageService";
//------begin--------for tree----------------
	var data =new Array();
	var poptarts ={ label:'name',identifier:'eId',items:data};
	var popStore = new dojo.data.ItemFileWriteStore({data: poptarts});
	var treeModel = new dijit.tree.ForestStoreModel({
  				store: popStore,
  				rootId: "root",
  				rootLabel: "",
  				childrenAttrs: ["children"]
  			});
	
	function addTreeNode(pid,placeName,placeType,id){
               var pInfo = {
								parent: pid.item,		
								attribute: "children"	
							};
               popStore.newItem({name: placeName,type:placeType ,eId:id}, pInfo);
    }  
    
	function delTreeNode(id){
		var node = dijit.byId("tree")._itemNodeMap[id];
		popStore.deleteItem(node.item);//同时删除所有子节点
	  }  
	  
	function setTreeNode(id,placeName,placeType){
		var node = dijit.byId("tree")._itemNodeMap[id];
		popStore.setValue(node.item,"placeName",placeName);         
		popStore.setValue(node.item,"placeType",placeType);      
		node.setLabelNode(placeName);
	}  
    
	function getTreeNodes(queryvo${manageable.name},chitem,layerInt,layerSum){//首层layerInt=0   (0,1,null,0,2);
	
             var pl = new SOAPClientParameters2();
             pl.add('${manageable.name}VO',queryvo${manageable.name}) ;
             pl.add('pageNumber',pagenumber${manageable.name}) ;
             pl.add('pageSize',pagesize${manageable.name}) ;
             pl.add('orderBy',orderBy${manageable.name}) ;
             SOAPClient.invoke(url, "get${manageable.name}", pl, false,  function GetEnu_callBack(ul, soapResponse){
               var pInfo = {
                   					parent: chitem,		
                   					attribute: "children"	
                   		};
               if(ul!=null && ul.length>0 ){
                     
                     for(var i = 0; i < ul.length; i++){		
                                  var ulo=ul[i];
                                  var newitem=popStore.newItem({name: ulo["ns:${manageable.name}Name"],type:ulo["ns:parentId"] ,eId:ulo["ns:id"],haveChild:"0"}, pInfo);//haveChild=0初始，1有子结点，2无子结点
                                  queryvo${manageable.name}=new ${manageable.name}VOJs();
								  queryvo${manageable.name}.parentId=ulo["ns:id"];
								  if(layerInt<layerSum)getTreeNodes(queryvo${manageable.name},newitem,layerInt+1,layerSum);
                            }
                      if(chitem!=null){
                            popStore.setValue(chitem,"haveChild","1"); 
                            var node = dijit.byId("tree")._itemNodeMap[chitem.eId];
                            node._updateItemClasses(node.item);
                      }
                }else{
                    popStore.setValue(chitem,"haveChild","2");  
                }       
          });
        
        }
	function expandAllChildrenNode(tree,treeNode,layerInt,layerSum){
		  tree._expandNode(treeNode);
          var childrenArray=treeNode.getChildren();
          for (var i=0; i<childrenArray.length; i++){	
             if(layerInt<layerSum) expandAllChildrenNode(tree,childrenArray[i],layerInt+1,layerSum);
             if(layerInt==layerSum)childrenArray[i]._updateItemClasses(childrenArray[i].item);
          }
	}  	
//--end -----for tree------------------------------
	
#foreach($member in $manageable.manageableAttributes)
	#if ($member.type.fullyQualifiedName=='com.logistics.entity.order.StringEnum')
			var p${member.name} = new SOAPClientParameters();
			p${member.name}.add('eType','${member.name}');
			var item${member.name} = new Array();
				SOAPClient.invoke(urle, "getEnumerationByType", p${member.name}, false,  function GetEnu_callBack(ul, soapResponse){   
				for(var i = 0; i < ul.length; i++){		
				  var ulo=ul[i];
				  item${member.name}.push({name: ulo["ns:fieldName"], value:ulo["ns:fieldName"]});
				}                
			});       
			var ${member.name}Store = new dojo.data.ItemFileWriteStore({data: {identifier:"value", items: item$member.name}}); 
	#end
#end

//have set function's manageableAssociationEnds
#foreach($member in $manageable.manageableAssociationEnds)
	var p${member.name} = new SOAPClientParameters();
	var items${member.name} = new Array();  
		p${member.name}.add('${member.type.name}VO',new  ${member.type.name}VOJs()) ;
		p${member.name}.add('pageNumber',0) ;
		p${member.name}.add('pageSize',0) ;
	    p${member.name}.add('orderBy','0') ;
	SOAPClient.invoke(getUrl()+ "services/"+"${member.type.name}ManageService","get${member.type.name}", p${member.name}, false,  function GetEnu_callBack(ul, soapResponse){      
				for(var i = 0; i < ul.length-1; i++){		
				  var ulo=ul[i];
				  items${member.name}.push({name: ulo["ns:${member.type.name}Name"], value:ulo["ns:id"]});
				}                
	});       
	var ${member.name}Store = new dojo.data.ItemFileWriteStore({data: {identifier:"value", items: items${member.name} }});

	function ${member.name}Set(id,value){
        	/*var itemselect=${member.name}Store._getItemByIdentity(value);
        	if(itemselect!='undefined'&& itemselect!=null){
        	}*/
        }
#end

 
	 //先判断表的字段数是否大于12，如果大于12，则生成单行layout和折叠layout两个structure
	 //enumeration!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
	var layoutSingleRow=[{
          
                 //根据field的值，依据默认的顺序，从js中的toArray转换方法返回的querydate中取数据
                       
                                 cells: [ [
                                            //{name: '选择', width: 3, get:getChoise},
                                           { name: i18nStr.chose, width: 3,field:0, styles: 'text-align: center;', editor: dojox.grid.editors.Bool },//
                                           { name: i18nStr.no, width: 3, styles: 'text-align: center;', get: function(inRowIndex){ return inRowIndex+1;} },//
#set ($comma = "")
#set ($inum = 2)                       
#foreach($member in $manageable.manageableAttributes)
#if ($member.name != ${manageable.manageableIdentifier.name})
  #if ($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
         ${comma} {name: i18nStr.$member.name,field:${inum}, width: 8,editor: dojox.grid.editors.Dijit, editorClass: "mydojo.NumberTextBox", constraint: {min:0,max:9999999,places:4 } }
		#set ($inum= $inum + 1)
  #elseif ($member.type.dateType)
		${comma}  {name: i18nStr.${member.name},field:${inum}, width: 8,editor: dojox.grid.editors.DateTextBox,  formatter: formatDate,  constraint: { selector: "date",datePattern: "yyyy-MM-dd"}}
		#set ($inum= $inum + 1)
		${comma}  {name: i18nStr.${member.name}Time,field:${inum}, width: 8,editor: dojox.grid.editors.TimeTextBox, formatter: formatDate, constraint: {selector: "time" ,timePattern: "HH:mm"}}
		#set ($inum= $inum + 1)
  #else
    #if ($member.required)
	    ${comma}  {name: i18nStr.$member.name, field: ${inum},width: 10 , editor: mydojo.ValidationTextBox ,required:true ,maxLength:30,invalidMessage:'can not be empty'}
		#set ($inum= $inum + 1)
	#else
		#if ($member.name=='remark')
		    ${comma}  {name: i18nStr.$member.name, field: ${inum},width: 10, editor: dojox.grid.editors.Editor, editorToolbar: true  }
			#set ($inum= $inum + 1)
		#else
			${comma}  {name: i18nStr.$member.name, field: ${inum},width: 10 , editor: mydojo.ValidationTextBox ,required:false ,maxLength:30}
			#set ($inum= $inum + 1)
		#end
    #end
  #end
  #set ($comma = ", ")
#end
#end  

#foreach($member in $manageable.manageableAssociationEnds)//对于单表不许其他判断
	#if(!${member.many})                                             
				 ${comma}  {name: i18nStr.$member.name,field: ${inum},get:function(inRowIndex){ var str='';var strid;if(querydata[inRowIndex]!=undefined && querydata[inRowIndex][${inum}]!=undefined){str=querydata[inRowIndex][${inum}][2];strid=querydata[inRowIndex][${inum}][1];} return str+'<button dojoType="dijit.form.Button" onclick="select${member.type.name}('+strid+','+inRowIndex+',${inum},0,event);"   iconClass="${member.type.name}Icon">sel</button>';} ,width: 10 }
		#set ($inum= $inum + 1)
	#end
#end
                                        ] ]
                           }]; 


						   
	function call_funUpd() {
       //var s = grid.selection.getSelected();
       //var  d=new DateTimeQuery();
       //var n=new NumberQuery();
       var sall=grid.model.data;
       for(var i=0;i<sall.length;i++){
       if(sall[i][0]==true){
         var passAll=0;
         var thisCell=sall[i];
         var padd = new SOAPClientParameters2();
         var vobject=new ${manageable.name}VOJs();
         vobject.id=thisCell[1];
#set ($inum = 2)                       
#foreach($member in $manageable.manageableAttributes)
#if ($member.name != ${manageable.manageableIdentifier.name})
#if ($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
             if(dojox.validate.isInRange(thisCell[$inum],{max:9999999, min:0})){
              var  n=new NumberQuery(); n.upNumber=thisCell[$inum];vobject.$member.name=n;
             }else{grid.getCell(grid.model.fieldArray[$inum]).getNode(i).innerHTML="<span style={color:red;line-height:16px}> not be double</span>";passAll=1;}//double
#elseif ($member.type.fullyQualifiedName == 'java.util.Calendar'||$member.type.fullyQualifiedName == 'java.util.Date')
 var  d=new DateTimeQuery();
             if(thisCell[$inum] instanceof Date){ d.upDate=dojo.date.locale.format(thisCell[$inum], grid.getCell(grid.model.fieldArray[$inum]).constraint);
             }else{grid.getCell(grid.model.fieldArray[$inum]).getNode(i).innerHTML="<span style={color:red;line-height:16px}>must be date</span>"; passAll=1;}//not null
 #set ($inum= $inum + 1) 
             if(thisCell[$inum] instanceof Date){
             d.upDate=d.upDate+" "+dojo.date.locale.format(thisCell[$inum], grid.getCell(grid.model.fieldArray[$inum]).constraint);
             vobject.$member.name=d;
             }else{grid.getCell(grid.model.fieldArray[$inum]).getNode(i).innerHTML="<span style={color:red;line-height:16px}>must be time</span>"; passAll=1;}//not null

#else        
 #if ($member.required)
             if(dojox.validate.isText(thisCell[$inum], {minlength: 1})){vobject.$member.name=thisCell[$inum];
             }else{grid.getCell(grid.model.fieldArray[$inum]).getNode(i).innerHTML="<span style={color:red;line-height:16px}>can not be null</span>"; passAll=1;}//not null
 #else
              vobject.$member.name=thisCell[$inum];
 #end
#end

#set ($inum= $inum + 1)
#end
#end

#foreach($member in $manageable.manageableAssociationEnds)
	#if(!${member.many})
			var manageable=new ${member.type.name}VOJs();
			 if(querydata[i][$inum]!=''&&querydata[i][$inum]!=undefined){
             manageable.id=querydata[i][$inum][1];
             vobject.${member.name}=manageable;
			 }else{
			 grid.getCell(grid.model.fieldArray[$inum]).getNode(i).innerHTML="<span style={color:red;line-height:16px}>can not be null</span>"; passAll=1;
			 }
		#set ($inum= $inum + 1)
	#end
#end



       if(passAll==0){
             if(thisCell[1]==0){//create new row
                padd.add('${manageable.name}VO',vobject);
                SOAPClient.invoke(url, "create${manageable.name}", padd, false,  function GetEnu_callBack(ul, soapResponse){
                grid.model.setDatum(ul,i,1);
                });
	         }else{//modify row
                padd.add('${manageable.name}VO',vobject);
                SOAPClient.invoke(url, "update${manageable.name}", padd, false,  function GetEnu_callBack(ul, soapResponse){
                });
	         }
        } }}//for
//submit delete
          for(var i=0;i<deletedata.length;i++){
               var pdel = new SOAPClientParameters();      
               pdel.add('id',deletedata[i]);
               SOAPClient.invoke(url, "delete${manageable.name}", pdel, false,  function GetEnu_callBack(ul, soapResponse){
	             
	           });
          }
          deletedata=new Array();
          //dojo.byId("rowCount").innerHTML = 'saved'; 
//submit delete end          
 } 
 
 function removeSelectedRowsGrid(){
       //var s = grid.selection.getSelected();
       var s= new Array();
       var sall=grid.model.data;
       for(var i=0;i<sall.length;i++){
       if(sall[i][0]==true){
          s.push(i);
          var thisCell=sall[i];
          if(thisCell[1]!=0){//the row which will be deleted
            deletedata.splice(deletedata.length,0,thisCell[1]);
       }}}
       grid.model.remove(s);//grid.removeSelectedRows();
 }
        
addRow = function(){
          	grid.addRow([false,0,"","",""],grid.model.getRowCount());
	        } 	 
	 
function querybutton(){
              //var p = new SOAPClientParameters2();
              var d,n;
              var validstate=0;
              //queryvo.id=0 ;
              queryvo=new ${manageable.name}VOJs();
#foreach($member in $manageable.manageableAttributes)
#if ($member.name != ${manageable.manageableIdentifier.name})
#if ($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
              n=queryNumber_fun("${member.name}");
              if(n==null){validstate=1;}else if(n.upSign!="%"){queryvo.${member.name}=n;}  
#elseif ($member.type.fullyQualifiedName == 'java.util.Calendar'||$member.type.fullyQualifiedName == 'java.util.Date')   
              d=queryDate_fun("${member.name}");
              if(d==null){validstate=1;}else if(d.upSign!="%"){queryvo.${member.name}=d;}
#else
	          if(query${member.name}.getDisplayedValue()!="")queryvo.${member.name}=query${member.name}.getDisplayedValue();//
#end
#end
#end
			
#foreach($member in $manageable.manageableAssociationEnds)
	if(query${member.name}.getDisplayedValue()!=""){
				var ${member.name}Query= new ${member.type.name}VOJs();
				//${member.name}Query.${manageable.name}Name=query${member.name}.getDisplayedValue();
				${member.name}Query.id=query${member.name}.getValue();
				queryvo.${member.name}=${member.name}Query;
			  }
#end

			if(validstate==0){
              pagenumber=1;
              getVO(queryvo,pagenumber,pagesize,'0'); 
              //if(totalpage>1){dijit.byId("but7").setDisabled(false);}else{dijit.byId("but7").setDisabled(true);} 
             }      
       }
	 
querydis = function(){
               querydisplay("queryDiv");
            }
 
 
function ${manageable.name}VOtoArray_fun(ulvo,edit){
            var querydata=new Array();
            var items = new Array();
            var ul=new Array();
            var ulo="";
            var le="";
            var d="",t;
            var arraytag="0";//isArray
            if(ulvo!=null){
              if(ulvo.length==undefined){
                 ul[0]=ulvo;
                 arraytag="1";
                 le=1;
              }else{
                 ul=ulvo;
                 le=ul.length;
              }        
              if(edit==false){
                    for(var i = 0; i < le; i++){		
                        items = new Array();
                        ulo=ul[i];
                        items[0] = false;
                        items[1] = ulo["ns:id"];
                        
#set ($inum = 2)                       
#foreach($member in $manageable.manageableAttributes)
#if ($member.name != ${manageable.manageableIdentifier.name})
#if($member.type.dateType)
                        t=ulo["ns:$member.name"];if(t!=null&&t!=undefined){items[$inum] = t['ns:upDate'];}
#elseif($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
                        t=ulo["ns:$member.name"];if(t!=null&&t!=undefined){items[$inum] =  t['ns:upNumber'];}
#else
                        items[$inum] = ulo["ns:$member.name"];//
#end
#set ($inum= $inum + 1)
#end
#end
#foreach($member in $manageable.manageableAssociationEnds)
                         items[$inum] = ulo["ns:$member.name"];
#set ($inum= $inum + 1)
#end
                      if(arraytag=="0"){
                        querydata[i]=items;
                      }else{
                        querydata=items;
                      }
                    }
                  }else{//edit==true
                    for(var i = 0; i < le; i++){		
                        items = new Array();
                        ulo=ul[i];
                        items[0] = false;
                        items[1] = ulo["ns:id"];
                        
#set ($inum = 2)                       
#foreach($member in $manageable.manageableAttributes)
#if ($member.name != ${manageable.manageableIdentifier.name})
#if($member.type.dateType)
                        t=ulo["ns:$member.name"];if(t!=null&&t!=undefined){
                        d=dojo.date.locale.parse(new String( t['ns:upDate']),{datePattern: "yyyy-MM-dd",timePattern:"HH:mm" });}
                        items[$inum] = d;
#set ($inum= $inum + 1)
                        items[$inum] = d;                        
#elseif($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
                        t=ulo["ns:$member.name"];if(t!=null&&t!=undefined){items[$inum] =  t['ns:upNumber'];}
#else
                        items[$inum] = ulo["ns:$member.name"];//
#end
#set ($inum= $inum + 1)
#end
#end
#foreach($member in $manageable.manageableAssociationEnds)
                         items[$inum] = ${member.type.name}VOtoArray_fun(ulo["ns:$member.name"],edit);
#set ($inum= $inum + 1)
#end
                      if(arraytag=="0"){
                        querydata[i]=items;
                      }else{
                        querydata=items;
                      }
                    }
                  } 
            }//!=null                     
            return querydata;
}
 

function get${manageable.name}VO(queryvo){
	var totalCount=0;
	deletedata${manageable.name} =new Array();
      var pu = new SOAPClientParameters2();
      pu.add('${manageable.name}VO',queryvo) ;
      pu.add('pageNumber',pagenumber${manageable.name}) ;
	    pu.add('pageSize',pagesize${manageable.name}) ;
	    pu.add('orderBy',orderBy${manageable.name}) ;
      SOAPClient.invoke(url,"get${manageable.name}", pu, false,  function GetEnu_callBack(ul, soapResponse){      
           querydata${manageable.name}=new Array();
		   querydata${manageable.name}=${manageable.name}VOtoArray_fun(ul,true);
           totalCount=ul[ul.length-1]["ns:id"]; 
      }); 
      querydata${manageable.name}.splice(querydata${manageable.name}.length-1,1);
	  grid${manageable.name}.selection.clear();
      model${manageable.name}.setData(querydata${manageable.name});
      //dijit.byId("grid").updateRowCount(querydata${manageable.name}.length); 
	   var totalpage=Math.ceil(new Number(totalCount)/pagesize${manageable.name});
	  
	if(totalpage>1){
		if(pagenumber${manageable.name}==1){
			dijit.byId("but6${manageable.name}").setDisabled(true);
			dijit.byId("but7${manageable.name}").setDisabled(false);
		}else if(pagenumber${manageable.name}==totalpage){
			dijit.byId("but6${manageable.name}").setDisabled(false);
			dijit.byId("but7${manageable.name}").setDisabled(true);
		}else{
			dijit.byId("but6${manageable.name}").setDisabled(false);
			dijit.byId("but7${manageable.name}").setDisabled(false);
		}
	}else{
		dijit.byId("but6${manageable.name}").setDisabled(true);
		dijit.byId("but7${manageable.name}").setDisabled(true);
	
	}
	if(pagesize${manageable.name}==0){
		totalpage=1;
		dijit.byId("but6${manageable.name}").setDisabled(true);
		dijit.byId("but7${manageable.name}").setDisabled(true);
	}
	if(totalpage==1)pagenumber${manageable.name}=1;
	
	 document.getElementById("rowCount${manageable.name}").innerHTML=i18nStr.di+" "+pagenumber${manageable.name}+" "+i18nStr.page+" / "+i18nStr.totle+" "+totalpage+" "+i18nStr.page+" / "+i18nStr.sum+" "+totalCount+" "+i18nStr.rowSize; 	
	  
	  
 }
 
function init(){
	var _tree=dijit.byId("tree");  
	//queryvo${manageable.name}=new ${manageable.name}VOJs();
    queryvo${manageable.name}.parentId=0;
	getTreeNodes(queryvo${manageable.name},null,0,2);
	expandAllChildrenNode(_tree,_tree.rootNode,0,1);
	
	dojo.connect(dijit.byId("tree"), "_onExpandoClick", function(message){
		   var node = message.node;
		   var ch2node=node.getChildren();
		   for (var i=0; i<ch2node.length; i++){	
		   if(ch2node[i].getChildren().length==0&&ch2node[i].item.haveChild=="0"){
			 var ch2item =ch2node[i].item;
			 queryvo${manageable.name}=new ${manageable.name}VOJs();
			 queryvo${manageable.name}.parentId=ch2item.eId;
			 getTreeNodes(queryvo${manageable.name},ch2item,0,1);
		   }
	});   
	 dojo.connect(_tree, "onClick", function(item,node){
	 //判断哪个tab在显示
			selectNode=node;
			selectNodeIdentity = _tree.store.getIdentity(item);
			var p0 = new SOAPClientParameters2();
	  if(mainTabContainer.selectedChildWidget.id=='codePane'){
			queryvo${manageable.name}=new ${manageable.name}VOJs();
			queryvo${manageable.name}.parentId=item["eId"];
			get${manageable.name}VO(queryvo${manageable.name});
			//codegrid.selection.clear();
		/* var titles=node.item["name"];
		var parentNodes=node;
		while(parentNodes.getParent()!= null&& parentNodes.getParent()["id"]!="tree"){
			  parentNodes=parentNodes.getParent();
			  titles=parentNodes.item["name"]+' '+titles;
		};
		dojo.byId("placetitle").innerHTML = titles +"";*/
	}else{
		queryvo${manageable.name}=new ${manageable.name}VOJs();
		queryvo${manageable.name}.parentId=item["eId"];
		get${manageable.name}VO(queryvo${manageable.name});
	  }  
   });   
}

 dojo.addOnLoad(init);   

#foreach($member in $manageable.manageableAssociationEnds)
	function select${member.type.name}Fun(rep){
		querydata[select${member.type.name}InRow][no${member.type.name}]=rep;
		grid.updateRow(select${member.type.name}InRow);		
	}
#end
//addDiv---------------begin-------------------------------------
var addDivAdd = function(){
	 if(document.getElementById('queryDiv').style.display=='')document.getElementById('queryDiv').style.display='none';
	 if(document.getElementById('addDiv').style.display=='none')document.getElementById('addDiv').style.display='';
	 //清空add界面
	#foreach($member in $manageable.manageableAttributes)
		#if ($member.name != ${manageable.manageableIdentifier.name})
			#if($member.type.dateType)
				dijit.byId("add${member.name}").setValue('');
				dijit.byId("add${member.name}Time").setValue('');
			#else
				//enumeration 与普通的String相同处理？
				dijit.byId("add${member.name}").setValue('');
			#end
		#end
	#end
	
	#foreach($member in $manageable.manageableAssociationEnds)
		dijit.byId("add${member.name}").setValue('');
	    dijit.byId("add${member.name}").setDisplayedValue('');
	#end
	
	document.getElementById('${manageable.name}Id').value='0';
	//document.getElementById('referTimeAdd1').value=dojo.date.locale.format(new Date(),{ datePattern: "yyyy-MM-dd", selector: "date"});
	//document.getElementById('referTimeAdd2').value=dojo.date.locale.format(new Date(),{ timePattern: "HH:mm", selector: "time"});
} 
function addDivSave(){
	var padd = new SOAPClientParameters2();
	var vobject=new ${manageable.name}VOJs();
    vobject.id=document.getElementById('${manageable.name}Id').value;
	var passAll=0;
	#foreach($member in $manageable.manageableAttributes)
		#if ($member.name != ${manageable.manageableIdentifier.name})
			#if($member.type.dateType)
				if(dijit.byId("add${member.name}").getValue() instanceof Date){ 
					if(dijit.byId("add${member.name}Time").getValue() instanceof Date){
						var d${member.name}=new DateTimeQuery();
						d${member.name}.upDate=dojo.date.locale.format(dijit.byId("add${member.name}").getValue(), dijit.byId("add${member.name}").constraints)+" "+dojo.date.locale.format(dijit.byId("add${member.name}Time").getValue(), dijit.byId("add${member.name}Time").constraints);
						vobject.${member.name}=d${member.name};
					}else{passAll=1;}
				}else{
					passAll=1;}
			#elseif ($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
				if(dijit.byId("add${member.name}").isValid(true)){
					var n${member.name}=new NumberQuery();
					n${member.name}.upNumber=dijit.byId("add${member.name}").getValue();
					vobject.${member.name}=n${member.name};
				}else{
					passAll=1;
				}
			#else
				//enumeration 与普通的String相同处理？
				if(dijit.byId("add${member.name}").isValid(true)){
					vobject.${member.name}=dijit.byId("add${member.name}").getValue();
				}else{
					passAll=1;
				}
			#end
		#end
	#end
	
#foreach($member in $manageable.manageableAssociationEnds)
	if(dijit.byId("add${member.name}").isValid(true)){
		//vobject.${member.name}=dijit.byId("add${member.name}").getValue();
		var manageable=new ${member.type.name}VOJs();
		manageable.id=dijit.byId("add${member.name}").getValue();
		vobject.${member.name}=manageable;
	}else{
		passAll=1;
	}
#end
	
if(passAll==0){
		//var addrow='';
		var addrow=[];
		#foreach($member in $manageable.manageableAttributes)
			#if ($member.name != ${manageable.manageableIdentifier.name})
				#if($member.type.dateType)
					//addrow=addrow+","+vobject.${member.name}.upDate+","+vobject.${member.name}.upDate;
					addrow.push(dojo.date.locale.parse(vobject.${member.name}.upDate,{datePattern: "yyyy-MM-dd",timePattern:"HH:mm" }));
					addrow.push(dojo.date.locale.parse(vobject.${member.name}.upDate,{datePattern: "yyyy-MM-dd",timePattern:"HH:mm" }));
				#elseif ($member.type.fullyQualifiedName == 'double' || $member.type.fullyQualifiedName == 'long')
					//addrow=addrow+","+vobject.${member.name}.upNumber;
					addrow.push(vobject.${member.name}.upNumber);
				#else
					//addrow=addrow+","+vobject.${member.name};
					addrow.push(vobject.${member.name});
				#end
			#end
		#end
		#foreach($member in $manageable.manageableAssociationEnds)
			//addrow=addrow+","+${member.type.name}VOtoArray_fun(vobject.${member.name},true);//addrow.push(${member.type.name}VOtoArray_fun(vobject.${member.name},true));
			addrow.push([false,add${member.name}.getValue(),add${member.name}.getDisplayedValue()]);
		#end
	 if(vobject.id==0){//create new row
		padd.add('${manageable.name}VO',vobject);
		SOAPClient.invoke(url, "create${manageable.name}", padd, false,  function GetEnu_callBack(ul, soapResponse){
		//addrow='false,ul'+addrow;
		addrow.splice(0,0,false,ul);
				console.log("addrow.lenght:"+addrow.length);
				console.log("addrow:"+addrow);
		grid.addRow([addrow]);
		});
	 }else{//modify row
		padd.add('${manageable.name}VO',vobject);
		SOAPClient.invoke(url, "update${manageable.name}", padd, false,  function GetEnu_callBack(ul, soapResponse){
		});
		//addrow='false,vobject.id'+addrow;
		addrow.splice(0,0,false,vobject.id);
		querydata[document.getElementById('erowIndex').value]=[addrow];
		//grid.updateRow(document.getElementById('erowIndex').value);
	 }
}   }

 function addDivRemove(){
     if(window.confirm(i18nStr.deleteConfirm)){
        //var s = dijit.byId("grid").selection.getSelected();
		var s = dijit.byId("grid").rowCount;
        //for(var i=0;i<s.length;i++){ 
              //var ii=s[i];
			  var ii=s.length;
              var si=document.getElementById('erowIndex').value;
              var pdel = new SOAPClientParameters();      
               //pdel.add('id',querydata[ii][1]);
			   pdel.add('id',si);
               SOAPClient.invoke(url, "delete${manageable.name}", pdel, false,  function GetEnu_callBack(ul, soapResponse){
               if(si>ii){
					if(si-1>=0){document.getElementById('erowIndex').value=si-1;}//else{document.getElementById('erowIndex').value='';}//????????????????????????????????//
               }
			   totalCount--;
               var totalpage=Math.ceil(new Number(totalCount)/pagesize);
               document.getElementById("rowCount").innerHTML="第"+pagenumber+"页/共"+totalpage+"页/总计"+totalCount+"条记录" ; 
               if(si=ii){if(document.getElementById('addDiv').style.display=='')document.getElementById('addDiv').style.display='none';}
	        });   
          //}             
           dijit.byId("grid").removeSelectedRows();
      }
 }    
//addDiv---------------end---------------------------------------	 
</script>
</head>	 
<body class="tundra">
<div dojoType="dijit.layout.SplitContainer"   orientation="horizontal"  sizerWidth="7" activeSizing="false"	style="border: 1px solid #bfbfbf; width: 1260px; height: 845px;"  >
	
	 <div dojoType="dijit.layout.ContentPane" id="treePane"  sizeMin="20" sizeShare="20"   >
				 
			<div id="tree" showRoot="true" persist="false" dojoType="dijit.Tree"  store="popStore" labelAttr="name"  childrenAttr="children" query="{type:0}" model="myModel" ></div> 
	 </div>
	 
	<div dojoType="dijit.layout.ContentPane" sizeMin="50" sizeShare="50"  >
	
		<div jsId="mainTabContainer" dojoType="dijit.layout.TabContainer"  styles="width: 70%; height: 100%;"  >
		
			<div id="codePane" dojoType="dijit.layout.ContentPane" title="货物分类编码" >
				<div id="queryDiv" style="margin-right: 0px;  height: 100px; display:none;" >
				  <table align="center" width=100% class="queryTable"  >
					<tr >
					<td align="center" style="{width:11%}" i18n="queryNote" >Please input criterial:</td>
					<td style="{width:22%}" ></td>
					<td style="{width:11%}"></td>
					<td style="{width:6%}" ></td>
					<td style="{width:11%}" ></td>
					<td style="{width:6%}" ></td>
					<td style="{width:11%}"></td>
					<td style="{width:22%}"></td>
					</tr> 
					<tr ><td align="center" style="{width:11%}"></td>
					<td style="{width:22%}" ></td>
					<td style="{width:11%}"></td>
					<td style="{width:6%}" ></td>
					<td style="{width:11%}" ></td>
					<td style="{width:6%}" ></td>
					<td style="{width:11%}"></td>
					<td style="{width:22%}"></td></tr>  
						<tr>
						<td align="right" i18n="parCode" >parCode:</td>
							<td align="left"  >
								<span id="queryparCodeImg0"  ><input type="text" class="editerNumber"   jsId="queryparCode"  id="queryparCode"  dojoType="mydojo.NumberTextBox"  /></span>
								<span id="queryparCodeImg1" style="{display:none}" ><input type="text"  class="editerNumberSmall" jsId="queryparCode1"  id="queryparCode1"  dojoType="mydojo.NumberTextBox"  /></span>
								<span hidefocus="true" style="{display:none}" onclick="selectSign(this);" id="queryparCodeImgup">></span>
								<span hidefocus="false"  style="{display:none}" onclick="selectSign(this);" id="queryparCodeImgdown" >></span>
								<span id="queryparCodeImg2div" style="{display:none}"> <input type="text"  class="editerNumberSmall"  jsId="queryparCode2"  id="queryparCode2"  dojoType="mydojo.NumberTextBox"  /></span>
								<img src="../image/start.gif" onclick="queryType(this);" id="queryparCodeImg" style="vertical-align:middle;margin-top:0px;">
								
							</td>
													<td align="right"  i18n="code" >code:</td>
							<td align="left" colspan="3" >
															<input type="text" class="editerInput"  id="querycode"  jsId="querycode"   dojoType="dijit.form.TextBox"  />
														</td>  
																<td align="right"  i18n="sno" >sno:</td>
							<td align="left"  >
														<input type="text" class="editerInput"  id="querysno"  jsId="querysno"   dojoType="dijit.form.TextBox"  />
													</td>  
											  </tr>
								<tr>
								<td align="right" i18n="name" >name:</td>
							<td align="left"  >
							
																<input type="text" class="editerInput"  id="queryname"  jsId="queryname"   dojoType="dijit.form.TextBox"  />
														</td>
															<td align="right"  i18n="remark" >remark:</td>
							<td align="left"  colspan="3" >
														<input type="text" class="editerInput"  id="queryremark"  jsId="queryremark"   dojoType="dijit.form.TextBox"  />
													</td>  
					

		</tr>

									<tr><td align="right"  i18n="customer"  ></td>
						<td align="left" ><input  id="querycustomer"  jsId="querycustomer" class="editerInput" dojoType="dijit.form.myFilteringSelect" store="customerStore"  /></td>  
								</tr>

			 <tr align="center"><td></td>
			   <td colspan="2"> <button dojoType="dijit.form.Button" onclick="querybutton();" iconClass="queryIcon"  i18n="query" >query</button></td>
			   <td colspan="3"></td><td colspan="2"></td></tr>
			 </table>
			 </div>	
					<div align="right">
						<button dojoType="dijit.form.Button" onclick="addRow();" iconClass="addIcon"  >add</button>
						<button dojoType="dijit.form.Button" onclick="removeSelectedRows();" iconClass="delIcon" i18n="delete" >delete</button>
						<button dojoType="dijit.form.Button"  onclick="call_funUpd();" i18n="save" iconClass="saveIcon">save</button>
						<button dojoType="dijit.form.Button" onclick="querydisplay('queryDiv');" iconClass="queryIcon"  i18n="openQuery" >query</button>
						<div align="right" ><span id="rowCount"></span>
							<button dojoType="dijit.form.myButton" onclick="upPage();"  id="but6IncWlCustCode" disabled='true' jsId="but6IncWlCustCode" iconClass="upPageIcon" >pageup</button><!--span dojoType="dijit.Tooltip" connectId="but6">pageup</span-->
							<button dojoType="dijit.form.myButton" onclick="downPage();" id="but7IncWlCustCode" disabled='true' jsId="but7IncWlCustCode" iconClass="downPageIcon" >pagedown</button><!--span dojoType="dijit.Tooltip" connectId="but7">pagedown</span-->
							<div  dojoType="dijit.form.myDropDownButton" iconClass="pageIcon" ><span>pageNumber</span>
								  <div dojoType="dijit.Menu">
									  <div dojoType="dijit.MenuItem" label="10"  iconClass="toPageIcon"		onClick="pageSizeChange(this.label);"></div>
									  <div dojoType="dijit.MenuItem"  label="30" iconClass="toPageIcon"		onClick="pageSizeChange(this.label);"></div>
								  <div dojoType="dijit.MenuItem"  label="50" iconClass="toPageIcon"		onClick="pageSizeChange(this.label);"></div>
										<div dojoType="dijit.MenuItem"  label="100" iconClass="toPageIcon"	onClick="pageSizeChange(this.label);"></div>
										<div dojoType="dijit.MenuItem"  label="noPage" iconClass="noPageIcon"	onClick="allpage();"></div>
								  </div><!--span dojoType="dijit.Tooltip" connectId="668"></span-->
							</div>
							<div dojoType="dijit.form.myDropDownButton" iconClass="pageStyleIcon"><span>pageStyle</span>
							   <div dojoType="dijit.Menu">
								 <div dojoType="dijit.MenuItem"  iconClass="rowIcon"		label="row"	onClick="pageStyle(this.label);"></div>
								 <div dojoType="dijit.MenuItem"  iconClass="colIcon"		label="col"	onClick="pageStyle(this.label);"></div>
							</div></div>
						</div>
					</div>   
				
				 <div  style="{width:100%; height: 1%; }" > </div>
				 
				<div id="codegrid"  dojoType="dojox.Grid"  autoWidth="false" style="{width:100%;height:85%}" 	jsId="codegrid"	model="model" structure="Layout" singleClickEdit="true"  ></div>
				 
			</div>

			<div id="productPane" dojoType="dijit.layout.ContentPane" title="货物编码"  selected="true" >
			<div id="queryDiv2" style="margin-right: 0px;  height: 100px; display:none;" >	
				<table align="center" width=100% class="queryTable"  >
	<tr >
	<td align="center" style="{width:11%}" i18n="queryNote" >Please input criterial:</td>
	<td style="{width:22%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}" ></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:22%}"></td>
	</tr> 
	<tr ><td align="center" style="{width:11%}"></td>
	<td style="{width:22%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}" ></td>
	<td style="{width:6%}" ></td>
	<td style="{width:11%}"></td>
	<td style="{width:22%}"></td></tr>  
                <tr>
							<td align="right" i18n="productCode" >productCode:</td>
						<td align="left"  >
						
															<input type="text" class="editerInput"  id="queryproductCode"  jsId="queryproductCode"   dojoType="dijit.form.TextBox"  />
													</td>
														<td align="right"  i18n="equName" >equName:</td>
						<td align="left"  colspan="3" >
													<input type="text" class="editerInput"  id="queryequName"  jsId="queryequName"   dojoType="dijit.form.TextBox"  />
												</td>  
													<td align="right"  i18n="productType" >productType:</td>
						<td align="left"  >
													<input type="text" class="editerInput"  id="queryproductType"  jsId="queryproductType"   dojoType="dijit.form.TextBox"  />
												</td>  
										  </tr>
			                <tr>
							<td align="right" i18n="model" >model:</td>
						<td align="left"  >
						
															<input type="text" class="editerInput"  id="querymodel"  jsId="querymodel"   dojoType="dijit.form.TextBox"  />
													</td>
														<td align="right"  i18n="unit" >unit:</td>
						<td align="left"  colspan="3" >
													<input type="text" class="editerInput"  id="queryunit"  jsId="queryunit"   dojoType="dijit.form.TextBox"  />
												</td>  
											<td align="right"  i18n="price" >price:</td>
						<td align="left"  >
							<span id="querypriceImg0"  ><input type="text" class="editerNumber" jsId="queryprice"  id="queryprice"  dojoType="mydojo.NumberTextBox"  /></span>
							<span id="querypriceImg1"  style="{display:none}" ><input type="text" class="editerNumberSmall" jsId="queryprice1"  id="queryprice1"  dojoType="mydojo.NumberTextBox"  /></span>
							<span hidefocus="true" style="{display:none}" onclick="selectSign(this);" id="querypriceImgup">></span>
							<span hidefocus="false"  style="{display:none}" onclick="selectSign(this);" id="querypriceImgdown" >></span>
							<span id="querypriceImg2div" style="{display:none}"> <input type="text" class="editerNumberSmall"  jsId="queryprice2"  id="queryprice2"  dojoType="mydojo.NumberTextBox"  /></span>
							<img src="../image/start.gif" onclick="queryType(this);" id="querypriceImg" style="vertical-align:middle;margin-top:0px;">
							
						</td>  
								  </tr>
			                <tr>
				<td align="right" i18n="weight" >weight:</td>
			<td align="left"  >
							<span id="queryweightImg0"  ><input type="text" class="editerNumber"   jsId="queryweight"  id="queryweight"  dojoType="mydojo.NumberTextBox"  /></span>
							<span id="queryweightImg1" style="{display:none}" ><input type="text"  class="editerNumberSmall" jsId="queryweight1"  id="queryweight1"  dojoType="mydojo.NumberTextBox"  /></span>
							<span hidefocus="true" style="{display:none}" onclick="selectSign(this);" id="queryweightImgup">></span>
							<span hidefocus="false"  style="{display:none}" onclick="selectSign(this);" id="queryweightImgdown" >></span>
							<span id="queryweightImg2div" style="{display:none}"> <input type="text"  class="editerNumberSmall"  jsId="queryweight2"  id="queryweight2"  dojoType="mydojo.NumberTextBox"  /></span>
							<img src="../image/start.gif" onclick="queryType(this);" id="queryweightImg" style="vertical-align:middle;margin-top:0px;">
							
						</td>
														<td align="right" i18n="volume" >volume:</td>
							<td align="left" colspan="3" >
								<span id="queryvolumeImg0"  ><input type="text" class="editerNumber" jsId="queryvolume"  id="queryvolume"  dojoType="mydojo.NumberTextBox"  /></span>
								<span id="queryvolumeImg1"  style="{display:none}" ><input type="text" class="editerNumberSmall" jsId="queryvolume1"  id="queryvolume1"  dojoType="mydojo.NumberTextBox"  /></span>
								<span hidefocus="true" style="{display:none}" onclick="selectSign(this);" id="queryvolumeImgup">></span>
								<span hidefocus="false"  style="{display:none}" onclick="selectSign(this);" id="queryvolumeImgdown" >></span>
								<span id="queryvolumeImg2div" style="{display:none}"> <input type="text" class="editerNumberSmall"  jsId="queryvolume2"  id="queryvolume2"  dojoType="mydojo.NumberTextBox"  /></span>
								<img src="../image/start.gif" onclick="queryType(this);" id="queryvolumeImg" style="vertical-align:middle;margin-top:0px;">
							</td>  
																				<td align="right"  i18n="level" >level:</td>
						<td align="left"  >
													<input type="text" class="editerInput"  id="querylevel"  jsId="querylevel"   dojoType="dijit.form.TextBox"  />
												</td>  
										  </tr>
			                <tr>
							<td align="right" i18n="request" >request:</td>
						<td align="left"  >
						
															<input type="text" class="editerInput"  id="queryrequest"  jsId="queryrequest"   dojoType="dijit.form.TextBox"  />
													</td>
														<td align="right"  i18n="remark" >remark:</td>
						<td align="left"  colspan="3" >
													<input type="text" class="editerInput"  id="queryremark2"  jsId="queryremark2"   dojoType="dijit.form.TextBox"  />
												</td>  
				

    </tr>
	<tr><td align="right"  i18n="codeID"  ></td>
					<td align="left" ><input  id="querycodeID"  jsId="querycodeID" class="editerInput" dojoType="dijit.form.myFilteringSelect" store="codeIDStore"  /></td>  
														<td align="right"  i18n="pack"  ></td>
					<td align="left" colspan="3" ><input  id="querypack"  jsId="querypack" class="editerInput" dojoType="dijit.form.myFilteringSelect" store="packStore"  /></td>  
	</tr>

         <tr align="center"><td></td>
           <td colspan="2"> <button dojoType="dijit.form.Button" onclick="querybutton2();" iconClass="queryIcon"  i18n="query" >query</button></td>
           <td colspan="3"></td><td colspan="2"></td></tr>
         </table>
			</div>
	           
	          	<div align="right">
	          	<button dojoType="dijit.form.Button" onclick="addRow2();" iconClass="addIcon"  >add</button>
	                <button dojoType="dijit.form.Button" onclick="removeSelectedRows2();" iconClass="delIcon" i18n="delete" >delete</button>
	                <button dojoType="dijit.form.Button"  onclick="call_funUpd2();" i18n="save" iconClass="saveIcon">save</button>
	          	    <button dojoType="dijit.form.Button" onclick="querydisplay('queryDiv2');" iconClass="queryIcon"  i18n="openQuery" >query</button>
				 </div>   
				<div align="right" ><span id="rowCount2"></span>
        <button dojoType="dijit.form.myButton" onclick="upPage();"  id="but6" disabled='true' jsId="but6" iconClass="upPageIcon" >pageup</button><!--span dojoType="dijit.Tooltip" connectId="but6">pageup</span-->
        <button dojoType="dijit.form.myButton" onclick="downPage();" id="but7" disabled='true' jsId="but7" iconClass="downPageIcon" >pagedown</button><!--span dojoType="dijit.Tooltip" connectId="but7">pagedown</span-->
        <div id="668" dojoType="dijit.form.myDropDownButton" iconClass="pageIcon" ><span>pageNumber</span>
  			  <div dojoType="dijit.Menu">
				  <div dojoType="dijit.MenuItem" label="10"  iconClass="toPageIcon"		onClick="pageSizeChange2(this.label);"></div>
				  <div dojoType="dijit.MenuItem"  label="30" iconClass="toPageIcon"		onClick="pageSizeChange2(this.label);"></div>
		      <div dojoType="dijit.MenuItem"  label="50" iconClass="toPageIcon"		onClick="pageSizeChange2(this.label);"></div>
					<div dojoType="dijit.MenuItem"  label="100" iconClass="toPageIcon"	onClick="pageSizeChange2(this.label);"></div>
					<div dojoType="dijit.MenuItem"  label="noPage" iconClass="noPageIcon"	onClick="allpage2();"></div>
		      </div><!--span dojoType="dijit.Tooltip" connectId="668"></span-->
        </div>
		    <div id="669" dojoType="dijit.form.myDropDownButton" iconClass="pageStyleIcon"><span>pageStyle</span>
  			   <div dojoType="dijit.Menu">
  				 <div dojoType="dijit.MenuItem"  iconClass="rowIcon"		label="row"	onClick="pageStyle2(this.label);"></div>
  				 <div dojoType="dijit.MenuItem"  iconClass="colIcon"		label="col"	onClick="pageStyle2(this.label);"></div>
		    </div></div>
		</div> 
	      
	         
	   <div style="{width:100%;height:90%;}" >
	         <div id="productgrid"  dojoType="dojox.Grid" autoWidth="false"  jsId="productgrid"	model="model2"  structure="layout2" singleClickEdit="true" elasticView="3" ></div>
	   </div>
	   
		  </div>
		</div> 
    </div>  
</div> 
</body>
<script type="text/javascript">trans18tag();</script>
</html>		 
	 
	 
	 
	 
	 
	 
	 
	 
	 
	 
	 